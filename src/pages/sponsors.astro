---
import MainLayout from '../layouts/MainLayout.astro';
import ImageHeader from '../components/ImageHeader.astro';
import YearSelector from '../components/About/YearSelector.astro';
import Sponsors from '../components/Sponsorship/Sponsors.astro';
---

<MainLayout title="Knight Owls - Our Sponsors">
  <ImageHeader
    title="Our Amazing Sponsors"
    background="/images/headers/sponsors.webp"
  />
  <YearSelector />
  <Sponsors classes="showDefault" year="year2" filename="2022-23" />
  <Sponsors year="year1" filename="2021-22" />

  <script>
    // Get the element with the id of "yearselector"
    const selector = document.getElementById(
      'yearselector'
    ) as HTMLSelectElement;
    // When the selector changes, change the year to the selected year
    selector.addEventListener('change', function () {
      let newactive = document.querySelector('#' + this.value) as HTMLElement;
      let oldactive = document.querySelector('.sponsors') as HTMLElement;
      removeClass();
      newactive.classList.add('showDefault');
      oldactive.animate([{ opacity: '1' }, { opacity: '.5' }], {
        duration: 1000,
      });
      newactive.animate([{ opacity: '.2' }, { opacity: '1' }], {
        duration: 1000,
      });
    });
    function removeClass() {
      var allElements = document.querySelectorAll('.showDefault');
      for (let i = 0; i < allElements.length; i++) {
        allElements[i].classList.remove('showDefault');
      }
    }
  </script>
</MainLayout>
